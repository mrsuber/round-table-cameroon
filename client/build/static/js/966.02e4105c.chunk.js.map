{"version":3,"file":"static/js/966.02e4105c.chunk.js","mappings":"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","sources":["webpack://client/./src/components/admin/KandbanLoading/KanbanLoading.module.css?e88b","components/admin/KandbanLoading/KanbanLoading.component.tsx","webpack://client/./src/components/donation-table/donation-table.module.css?d2ed","components/donation-table/DonationTable.tsx","webpack://client/./src/components/shared/pagination/pagination.module.css?d5e9","components/shared/pagination/Pagination.tsx","pages/admin/donations/Donations.page.tsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"container\":\"KanbanLoading_container__5QdVb\",\"content\":\"KanbanLoading_content__fi5xO\",\"close\":\"KanbanLoading_close__Qn-VV\"};","import React, { ChangeEvent, ReactNode } from 'react';\nimport classes from './KanbanLoading.module.css';\n\ninterface IProps {\n  kanbanLoading?: boolean;\n  children?: ReactNode | any;\n  contentStyle?: object\n  containerStyle?: object\n}\n\nconst KanbanLoading = ({ kanbanLoading, children, contentStyle, containerStyle }: IProps) => {\n  return (\n    <>\n      {kanbanLoading && (\n        <div className={classes.container} style={containerStyle}>\n          <div className={classes.content} style={contentStyle}>{children}</div>\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default KanbanLoading;\n","// extracted by mini-css-extract-plugin\nexport default {\"table\":\"donation-table_table__AhxEn\"};","import React from 'react';\nimport styles from './donation-table.module.css'\n\ninterface Donation {\n    donatedBy: string;\n    donatedAmount: number;\n    receivedAmount: number;\n    purpose: string;\n    isTransaction: boolean;\n    engagedAmount: number;\n}\n\ninterface DonationTableProps {\n    donations: Donation[];\n    allDonations: Donation[];\n}\n\nconst DonationTable: React.FC<DonationTableProps> = ({ donations, allDonations }) => {\n    return (\n        <table className={styles.table} >\n            <thead>\n                <tr>\n                    <th style={{ width: '15%' }}>Donated By</th>\n                    <th style={{ width: '15%' }}>Donated Amount</th>\n                    <th style={{ width: '15%' }}>Authorized Amount</th>\n                    <th style={{ width: '15%' }}>Engaged Amount</th>\n                    <th style={{ width: '40%' }}>Purpose</th>\n                </tr>\n            </thead>\n            <tbody>\n                {donations && donations.map((donation, index) => (\n                    <tr key={index} style={donation.isTransaction ? { borderBottom: '1px solid #ccc', color: 'red' } : { borderBottom: '1px solid #ccc' }}>\n                        <td style={{ width: '15%' }}>{donation.donatedBy}</td>\n                        <td style={{ width: '15%' }}>{donation.isTransaction ? '' : `${donation.donatedAmount} FCFA`}</td>\n                        <td style={{ width: '15%' }}>{donation.isTransaction ? '' : `${donation.receivedAmount} FCFA`}</td>\n                        <td style={{ width: '15%' }}>{donation.isTransaction ? `${donation.engagedAmount} FCFA` : ''}</td>\n                        <td style={{ width: '40%' }}>{donation.purpose}</td>\n                    </tr>\n                ))}\n                <tr style={{ borderBottom: '1px solid #ccc' }}>\n                    <td></td>\n                    <td></td>\n                    <td></td>\n                    <td></td>\n                </tr>\n                <tr style={{ borderBottom: '1px solid #ccc' }}>\n                    <td style={{ width: '15%' }}>Total</td>\n                    <td style={{ width: '15%' }}>{allDonations && allDonations.reduce((total, donation) => total + donation.donatedAmount, 0)} FCFA</td>\n                    <td style={{ width: '15%' }}>{allDonations && allDonations.reduce((total, donation) => total + donation.receivedAmount, 0)} FCFA</td>\n                    <td style={{ width: '15%' }}>{allDonations && allDonations.reduce((total, donation) => total + donation.engagedAmount, 0)} FCFA</td>\n                    <td style={{ width: '40%' }}></td>\n                </tr>\n            </tbody>\n        </table>\n    );\n};\n\nexport default DonationTable;","// extracted by mini-css-extract-plugin\nexport default {\"paginationContainer\":\"pagination_paginationContainer__cwrdh\",\"paginationButton\":\"pagination_paginationButton__9Nk9a\",\"paginationText\":\"pagination_paginationText__aVVMh\"};","import React, { useState } from 'react';\nimport styles from './pagination.module.css'\n\ninterface PaginationProps {\n    totalPages: number;\n    onPageChange: (pageNumber: number) => void;\n}\n\nconst Pagination: React.FC<PaginationProps> = ({ totalPages, onPageChange }) => {\n    const [currentPage, setCurrentPage] = useState<number>(1);\n\n    const goToPreviousPage = () => {\n        if (currentPage > 1) {\n            setCurrentPage(prevPage => prevPage - 1);\n            onPageChange(currentPage - 1);\n        }\n    };\n\n    const goToNextPage = () => {\n        if (currentPage < totalPages) {\n            setCurrentPage(prevPage => prevPage + 1);\n            onPageChange(currentPage + 1);\n        }\n    };\n\n    return (\n        <div className={styles.paginationContainer}>\n            {currentPage > 1 && (\n                <button onClick={goToPreviousPage} className={styles.paginationButton}>Previous</button>\n            )}\n            <span className={styles.paginationText}>Page {currentPage} of {totalPages}</span>\n            {currentPage < totalPages && (\n                <button onClick={goToNextPage} className={styles.paginationButton}>Next</button>\n            )}\n        </div>\n    );\n};\n\nexport default Pagination;","import React, { useEffect, useState } from 'react';\n\nimport AdminLayout from '../../../layouts/Admin.layout';\nimport styles from './donations.module.css';\nimport { useAppDispatch, useAppSelector } from '../../../store';\nimport KanbanLoading from '../../../components/admin/KandbanLoading/KanbanLoading.component';\nimport Spinner from '../../../components/loaders/spinner/Spinner';\nimport NoData from '../../../components/admin/no-data/NoData.component';\nimport DonationCard from '../../../components/admin/donation-card/DonationCard.component';\nimport DonationTable from '../../../components/donation-table/DonationTable';\nimport { getDonationsAction } from '../../../store/features/slices/donations/donations.action';\nimport { paths } from '../../../routers/paths';\nimport { useNavigate } from 'react-router-dom';\nimport { endpoint } from '../../../api/config';\nimport Pagination from '../../../components/shared/pagination/Pagination';\n\nconst Donations = () => {\n  const { loading } = useAppSelector((state) => state.loader);\n  const { donations } = useAppSelector((state) => state.donations);\n  const [allDonations, setAllDonations] = useState<any>(donations?.data);\n  const [activeDonations, setActiveDonations] = useState<any>();\n  const [page, setPage] = useState(1);\n  const [value, setValue] = useState('');\n  const [balance, setBalance] = useState(0);\n  const dispatch = useAppDispatch();\n  const navigate = useNavigate();\n  const REFILL_FRACTION = 100 / 104;\n  const ELEMENTS_PER_PAGE = 10;\n\n  const getAllDonations = () => {\n    dispatch(getDonationsAction()).then((res: any) => {\n      const { payload } = res;\n      if (payload) {\n        const fetchedDonations = payload?.data.map((donation: { donatedBy: string; amount: number; purpose: string; isTransaction: boolean; engagedAmount: number }) => {\n          return {\n            donatedBy: donation.donatedBy,\n            donatedAmount: donation.amount,\n            receivedAmount: Math.floor(REFILL_FRACTION * donation.amount),\n            purpose: donation.purpose,\n            isTransaction: donation.isTransaction,\n            engagedAmount: donation.isTransaction ? donation.engagedAmount : 0\n          };\n        });\n        setAllDonations(fetchedDonations);\n        setActiveDonations(fetchedDonations.slice(0, ELEMENTS_PER_PAGE));\n      }\n    });\n  };\n\n  const updateDonations = (currentPage: number) => {\n    const start = (currentPage - 1) * ELEMENTS_PER_PAGE;\n    const end = start + ELEMENTS_PER_PAGE;\n    setActiveDonations(allDonations.slice(start, end));\n  };\n\n  useEffect(() => {\n    getAllDonations();\n  }, []);\n\n  useEffect(() => {\n    if (value) {\n      const filtered = allDonations?.filter((don: any) =>\n        String(don?.amount)?.toLowerCase().includes(value.toLowerCase()),\n      );\n      setAllDonations(filtered);\n    } else {\n      getAllDonations();\n    }\n  }, [value]);\n\n  useEffect(() => {\n    const fetchBalance = async () => {\n      try {\n        const response = await fetch(endpoint + '/donations/vallet-pay-balance');\n        const result = await response.json();\n        setBalance(result.balance);\n      } catch (error) {\n        console.error('Error fetching data:', error);\n      }\n    };\n\n    // Fetch data initially\n    fetchBalance();\n\n    // Fetch data every minute\n    const intervalId = setInterval(fetchBalance, 60000);  // 60000 milliseconds = 1 minute\n\n    // Cleanup interval on component unmount\n    return () => clearInterval(intervalId);\n  }, []);\n\n\n  return (\n    <AdminLayout\n      title='Donations'\n      showBack\n      actionText='Donate'\n      onClick={() => navigate(paths.DONATIONS)}\n      searchValue={value}\n      onChange={(e) => setValue(e.target.value)}\n    >\n      <DonationTable donations={activeDonations} allDonations={allDonations} />\n\n      <div style={{\n        margin: '30px 0',\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'center',\n        alignItems: 'center'\n      }}>\n        <div><h1>Current balance in wallet: {balance} FCFA</h1></div>\n        <div><Pagination totalPages={Math.ceil(allDonations.length / ELEMENTS_PER_PAGE)} onPageChange={updateDonations} /></div>\n      </div>\n      <KanbanLoading kanbanLoading={loading}>\n        <Spinner size='18px' />\n      </KanbanLoading>\n    </AdminLayout>\n  );\n};\n\nexport default Donations;\n"],"names":["kanbanLoading","children","contentStyle","containerStyle","className","classes","style","donations","allDonations","styles","width","map","donation","index","isTransaction","borderBottom","color","donatedBy","donatedAmount","receivedAmount","engagedAmount","purpose","reduce","total","totalPages","onPageChange","useState","currentPage","setCurrentPage","onClick","prevPage","loading","useAppSelector","state","loader","data","setAllDonations","activeDonations","setActiveDonations","value","setValue","balance","setBalance","dispatch","useAppDispatch","navigate","useNavigate","getAllDonations","getDonationsAction","then","res","payload","fetchedDonations","amount","Math","floor","slice","useEffect","filtered","filter","don","String","toLowerCase","includes","fetchBalance","fetch","endpoint","response","json","result","console","error","intervalId","setInterval","clearInterval","title","showBack","actionText","paths","DONATIONS","searchValue","onChange","e","target","margin","display","flexDirection","justifyContent","alignItems","ceil","length","start","end","Spinner","size"],"sourceRoot":""}